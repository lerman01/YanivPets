<!DOCTYPE html>
<html>
<head>
    <title>Peer A</title>
</head>
<body>
<h2>Peer A</h2>
<button id="createOffer">Create Offer</button>
<textarea id="offer" placeholder="Paste Offer Here"></textarea>
<textarea id="answer" placeholder="Paste Answer Here"></textarea>
<br>
<input type="text" id="messageInput" placeholder="Type your message here">
<button id="sendMessage">Send Message</button>
<script>
    const peerA = new RTCPeerConnection();
    let dataChannel = peerA.createDataChannel("channel");

    dataChannel.onopen = function (event) {
        console.log("Data channel is open");
    };

    dataChannel.onmessage = function (event) {
        console.log("Message from Peer B:", event.data);
    };

    document.getElementById("createOffer").onclick = async function () {
        const offer = await peerA.createOffer();
        await peerA.setLocalDescription(offer);
        document.getElementById("offer").value = JSON.stringify(offer);
    };

    document.getElementById("answer").addEventListener("change", async function () {
        const answer = JSON.parse(this.value);
        await peerA.setRemoteDescription(answer);
    });

    document.getElementById("sendMessage").onclick = function () {
        const message = document.getElementById("messageInput").value;
        dataChannel.send(message);
        console.log("Message sent to Peer B:", message);
    };

    // Handle ICE candidates
    peerA.onicecandidate = function (event) {
        if (event.candidate) {
            console.log("ICE Candidate from Peer A:", JSON.stringify(event.candidate));
        }
    };
</script>
</body>
</html>
