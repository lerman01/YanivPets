<!DOCTYPE html>
<html>
<head>
    <title>Peer B</title>
</head>
<body>
<h2>Peer B</h2>
<textarea id="offer" placeholder="Paste Offer Here"></textarea>
<button id="createAnswer">Create Answer</button>
<textarea id="answer" placeholder="Paste Answer Here"></textarea>
<script>
    const peerB = new RTCPeerConnection();

    peerB.ondatachannel = function (event) {
        const dataChannel = event.channel;

        dataChannel.onmessage = function (event) {
            console.log("Message from Peer A:", event.data);
            dataChannel.send("Hello Peer A!");
        };
    };

    document.getElementById("offer").addEventListener("change", async function () {
        const offer = JSON.parse(this.value);
        await peerB.setRemoteDescription(offer);
        const answer = await peerB.createAnswer();
        await peerB.setLocalDescription(answer);
        document.getElementById("answer").value = JSON.stringify(answer);
    });

    // Handle ICE candidates
    peerB.onicecandidate = function (event) {
        if (event.candidate) {
            console.log("ICE Candidate from Peer B:", JSON.stringify(event.candidate));
        }
    };
</script>
</body>
</html>
